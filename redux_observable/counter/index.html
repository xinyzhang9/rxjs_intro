<!DOCTYPE html>
<html>
<head>
  <script src="https://unpkg.com/redux@^3.5.2/dist/redux.min.js"></script>
  <script src="https://unpkg.com/@reactivex/rxjs/dist/global/Rx.js"></script>
  <script src="https://unpkg.com/redux-observable/dist/redux-observable.min.js"></script>
  <meta charset="utf-8">
  <title>JS Bin</title>
</head>
<body>
</body>
  <script>

    const INCREMENT = 'INCREMENT';
    const INCREMENT_IF_ODD = 'INCREMENT_IF_ODD';

    const increment = () => ({ type: INCREMENT });
    const incrementIfOdd = () => ({ type: INCREMENT_IF_ODD });

    const incrementIfOddEpic = (action$, store) =>
      action$.ofType(INCREMENT_IF_ODD)
        .filter(() => store.getState().counter % 2 === 1)
        .map(increment);

    const counter = (state = 0, action) => {
      switch (action.type) {
        case INCREMENT:
          return state + 1;

        default:
          return state;
      }
    };

    const { combineReducers, createStore, applyMiddleware } = Redux;
    const { combineEpics, createEpicMiddleware } = ReduxObservable;

    const rootReducer = combineReducers({ counter });
    const rootEpic = combineEpics(incrementIfOddEpic);

    const epicMiddleware = createEpicMiddleware(rootEpic);

    const store = createStore(rootReducer,
      applyMiddleware(epicMiddleware)
    );

    /**
     * This is using raw HTML + redux.
     * 
     * You will most likely use some sort of UI framework
     * like React, Angular, etc
     */
    const renderApp = () => {
      const { counter } = store.getState();

      document.body.innerHTML = `
        <div>
          <h1>Current count: ${counter}</h1>
          <button
            onclick="(${() => {
              store.dispatch(increment());
            }})();"
          >
            increment
          </button>
          <button
            onclick="(${() => {
              store.dispatch(incrementIfOdd());
            }})();"
          >
            increment if odd
          </button>
        </div>
      `;
    };

    store.subscribe(renderApp);
    renderApp();
  </script>
</html>